<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Data prefetch | Vapper</title>
    <meta name="description" content="A Vue-based server-side rendering framework">
    
    
    <link rel="preload" href="/assets/css/0.styles.02f63e62.css" as="style"><link rel="preload" href="/assets/js/app.23eaf080.js" as="script"><link rel="preload" href="/assets/js/2.0aa0d321.js" as="script"><link rel="preload" href="/assets/js/15.43d038ad.js" as="script"><link rel="prefetch" href="/assets/js/10.2e4d8158.js"><link rel="prefetch" href="/assets/js/11.f03f419c.js"><link rel="prefetch" href="/assets/js/12.b7b94b0c.js"><link rel="prefetch" href="/assets/js/13.a456cf4a.js"><link rel="prefetch" href="/assets/js/14.080cd0d6.js"><link rel="prefetch" href="/assets/js/16.e8d546d0.js"><link rel="prefetch" href="/assets/js/17.0cac33b8.js"><link rel="prefetch" href="/assets/js/18.21531901.js"><link rel="prefetch" href="/assets/js/19.67b4dd3a.js"><link rel="prefetch" href="/assets/js/20.24383ced.js"><link rel="prefetch" href="/assets/js/21.d53e9b37.js"><link rel="prefetch" href="/assets/js/22.b10f4389.js"><link rel="prefetch" href="/assets/js/23.e65b61ca.js"><link rel="prefetch" href="/assets/js/24.ea8b2c0c.js"><link rel="prefetch" href="/assets/js/25.22a2382e.js"><link rel="prefetch" href="/assets/js/26.c4675353.js"><link rel="prefetch" href="/assets/js/27.b6a010f2.js"><link rel="prefetch" href="/assets/js/28.e55f9cc4.js"><link rel="prefetch" href="/assets/js/29.09660c73.js"><link rel="prefetch" href="/assets/js/3.965d71d8.js"><link rel="prefetch" href="/assets/js/30.b4f82174.js"><link rel="prefetch" href="/assets/js/31.f8c2d521.js"><link rel="prefetch" href="/assets/js/32.c242acd4.js"><link rel="prefetch" href="/assets/js/33.2bee8dcb.js"><link rel="prefetch" href="/assets/js/34.6327eb07.js"><link rel="prefetch" href="/assets/js/35.1be62a55.js"><link rel="prefetch" href="/assets/js/36.258908ed.js"><link rel="prefetch" href="/assets/js/37.e7b0f006.js"><link rel="prefetch" href="/assets/js/4.58827b98.js"><link rel="prefetch" href="/assets/js/5.005534c8.js"><link rel="prefetch" href="/assets/js/6.876fe940.js"><link rel="prefetch" href="/assets/js/7.3eacb249.js"><link rel="prefetch" href="/assets/js/8.81e69c3f.js"><link rel="prefetch" href="/assets/js/9.474bbc33.js">
    <link rel="stylesheet" href="/assets/css/0.styles.02f63e62.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Vapper</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/introduction.html" class="nav-link">Guide</a></div><div class="nav-item"><a href="/write-plugin.html" class="nav-link">Advanced</a></div><div class="nav-item"><a href="/config.html" class="nav-link">Configuration</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/data-prefetching.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/zh/data-prefetching.html" class="nav-link">简体中文</a></li></ul></div></div> <a href="https://github.com/vapperjs/vapper" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/introduction.html" class="nav-link">Guide</a></div><div class="nav-item"><a href="/write-plugin.html" class="nav-link">Advanced</a></div><div class="nav-item"><a href="/config.html" class="nav-link">Configuration</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/data-prefetching.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/zh/data-prefetching.html" class="nav-link">简体中文</a></li></ul></div></div> <a href="https://github.com/vapperjs/vapper" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Guide</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/usage.html" class="sidebar-link">Usage</a></li><li><a href="/entry.html" class="sidebar-link">Entry file</a></li><li><a href="/data-prefetching.html" class="active sidebar-link">Data prefetch</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/data-prefetching.html#the-createfetcher-function" class="sidebar-link">The $createFetcher function</a></li><li class="sidebar-sub-header"><a href="/data-prefetching.html#avoid-duplicate-data-prefetching" class="sidebar-link">Avoid duplicate data prefetching</a></li><li class="sidebar-sub-header"><a href="/data-prefetching.html#store-vuex" class="sidebar-link">Store(Vuex)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/data-prefetching.html#return-a-store-instance-in-the-entry-file" class="sidebar-link">Return a Store instance in the entry file</a></li><li class="sidebar-sub-header"><a href="/data-prefetching.html#action-returns-a-promise-instance" class="sidebar-link">Action returns a Promise instance</a></li><li class="sidebar-sub-header"><a href="/data-prefetching.html#mapactions-function" class="sidebar-link">mapActions function</a></li><li class="sidebar-sub-header"><a href="/data-prefetching.html#call-createfetcher-in-actions" class="sidebar-link">Call $createFetcher in Actions</a></li></ul></li></ul></li><li><a href="/routes-meta.html" class="sidebar-link">Routes Meta</a></li><li><a href="/error-handling.html" class="sidebar-link">Error Handling</a></li><li><a href="/management-head.html" class="sidebar-link">Management &lt;head&gt;</a></li><li><a href="/assets.html" class="sidebar-link">Static Resource</a></li><li><a href="/caching.html" class="sidebar-link">Caching</a></li><li><a href="/using-plugin.html" class="sidebar-link">Using Plugin</a></li><li><a href="/injection.html" class="sidebar-link">Vapper Injection</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Advanced</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/config.html" class="sidebar-link">Configuration</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="data-prefetch"><a href="#data-prefetch" aria-hidden="true" class="header-anchor">#</a> Data prefetch</h1> <p><code>Vapper</code> provides more intuitive and powerful data prefetching capabilities, allowing you to perform data prefetching just like the <code>SPA</code> application.</p> <h2 id="the-createfetcher-function"><a href="#the-createfetcher-function" aria-hidden="true" class="header-anchor">#</a> The $createFetcher function</h2> <p>When developing <code>SPA</code> applications, we usually fetch data in the component's <code>created</code> or <code>mounted</code> hooks, for example:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Created hook</span>
<span class="token keyword">async</span> <span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Suppose the return value of the `fetchApi` function is a `Promise` instance.</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchApi</span><span class="token punctuation">(</span><span class="token string">'/list'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>But this code can't run properly in the <code>SSR</code> application, because during the server rendering process, the application can't know when the request ends, and it can't know which data needs to be serialized and sent to the client. So in order for the above code to run in the <code>SSR</code> application, you can pass the <code>fetchApi</code> function as a parameter to the <code>$createFetcher</code> function, which is injected into the component instance by <code>Vapper</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Created hook</span>
<span class="token keyword">async</span> <span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Call the this.$createFetcher function whose argument is a function that returns a Promise instance</span>
  <span class="token keyword">const</span> fetchList <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$createFetcher</span><span class="token punctuation">(</span>fetchApi<span class="token punctuation">)</span>
  <span class="token comment">// Fetch data</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchList</span><span class="token punctuation">(</span><span class="token string">'/list'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The above code is all the code for prefetching data in the <code>Vapper</code> application. Is it very simple?</p> <div class="tip custom-block"><p>Please note: Since the component's <code>mounted</code> hook function will not be executed during server-side rendering, you can only perform data prefetching in the <code>created</code> hook.</p></div> <h2 id="avoid-duplicate-data-prefetching"><a href="#avoid-duplicate-data-prefetching" aria-hidden="true" class="header-anchor">#</a> Avoid duplicate data prefetching</h2> <p>Reading the code above, you may have questions: &quot;Is the code inside the <code>created</code> hook function not executed on the server and client respectively? Does this lead to duplicate data prefetching?&quot;, in fact, no, <code>Vapper</code> automatically helps you avoid duplicate data prefetching, so you don't have to do anything.</p> <h2 id="store-vuex"><a href="#store-vuex" aria-hidden="true" class="header-anchor">#</a> Store(Vuex)</h2> <h3 id="return-a-store-instance-in-the-entry-file"><a href="#return-a-store-instance-in-the-entry-file" aria-hidden="true" class="header-anchor">#</a> Return a Store instance in the entry file</h3> <p><code>Vapper</code> allows you to optionally use <code>Vuex</code>, which is the same as creating an application instance, we also need to create a new <code>Stroe</code> instance for each request. Usually we will wrap the <code>createStore</code> factory function:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// store/index.js</span>

<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>
<span class="token keyword">import</span> fetch <span class="token keyword">from</span> <span class="token string">'./fetch'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">createStore</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Return the Store instance</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    state<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    mutations<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    actions<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Then create and return a <code>store</code> instance in the entry file:</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><br><br></div><pre class="language-js"><code><span class="token comment">// src/main.js</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">createApp</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>

  <span class="token comment">// Create store instance</span>
  <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token comment">// ...</span>

  <span class="token comment">// return</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> app<span class="token punctuation">,</span> router<span class="token punctuation">,</span> store <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="action-returns-a-promise-instance"><a href="#action-returns-a-promise-instance" aria-hidden="true" class="header-anchor">#</a> Action returns a Promise instance</h3> <p>We know that the argument passed to the <code>this.$createFetcher</code> function is a function that returns a <code>Promise</code> instance. Therefore, if the return value of a <code>action</code> is a <code>Promise</code> instance, we can perform data prefetching like this:</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-js"><code><span class="token comment">// created hook</span>
<span class="token keyword">async</span> <span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Create a fetcher</span>
  <span class="token keyword">const</span> fetchList <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$createFetcher</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'fetchData'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token comment">// Call the fetchList function to fetch data</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchList</span><span class="token punctuation">(</span><span class="token string">'/list'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>If we use <code>async/await</code>, the code for <code>action</code> looks like this:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  actions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">async</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">{</span> commit <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Send an asynchronous request</span>
      <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'setData'</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="mapactions-function"><a href="#mapactions-function" aria-hidden="true" class="header-anchor">#</a> mapActions function</h3> <p>If you use the <code>mapActions</code> function to map <code>actions</code> to the component's <code>methods</code>, the code will look more intuitive:</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><div class="highlighted"> </div><br><br><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> mapActions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'fetchData'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">async</span> <span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Pass this.fetchData as a parameter to `this.$createFetcher`</span>
    <span class="token keyword">const</span> fetchData <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$createFetcher</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>fetchData<span class="token punctuation">)</span>
    <span class="token keyword">await</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="call-createfetcher-in-actions"><a href="#call-createfetcher-in-actions" aria-hidden="true" class="header-anchor">#</a> Call $createFetcher in Actions</h3> <p>In the previous example, we all called the <code>this.$createFetcher</code> function in the <code>created</code> hook of the component to create <code>Fetcher</code>. If an <code>action</code> is used by multiple components, then calling the <code>this.$createFetcher</code> function in each component's <code>created</code> hook will be very cumbersome, therefore, we can move the call to the <code>this.$createFetcher</code> function to <code>action</code>:</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  actions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">async</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">{</span> commit <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> vm <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Call the $createFetcher function here</span>
      <span class="token keyword">const</span> fetchData <span class="token operator">=</span> vm<span class="token punctuation">.</span><span class="token function">$createFetcher</span><span class="token punctuation">(</span>fetch<span class="token punctuation">)</span>
      <span class="token comment">// Send an asynchronous request</span>
      <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'setData'</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>At this point we can call <code>action</code> directly in the <code>created</code> hook of the component:</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token keyword">async</span> <span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'fetchData'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> vm<span class="token punctuation">:</span> <span class="token keyword">this</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>If you use the <code>mapActions</code> utility function:</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'fetchData'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">async</span> <span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">{</span> vm<span class="token punctuation">:</span> <span class="token keyword">this</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Note: We must explicitly pass the current component instance (<code>vm</code>) as <code>payload</code> so that the <code>vm.$createFetcher</code> function can be accessed using the component instance in <code>action</code>.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/vapperjs/vapper/edit/master/docs/data-prefetching.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/entry.html" class="prev">
          Entry file
        </a></span> <span class="next"><a href="/routes-meta.html">
          Routes Meta
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/2.0aa0d321.js" defer></script><script src="/assets/js/15.43d038ad.js" defer></script><script src="/assets/js/app.23eaf080.js" defer></script>
  </body>
</html>
